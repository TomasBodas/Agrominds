@{
 ViewBag.Title = "Reset Password";
 Services.Idioma.Translator translator = new Services.Idioma.Translator();
 UAIDesarrolloArquitectura.Controllers.IdiomaController lC = new UAIDesarrolloArquitectura.Controllers.IdiomaController();
 lC.InitializeController();
 Services.LanguageService service = lC.GetService();
 service.Susbcribe(translator);
 if (Services.SessionManager.IsLogged()) { service.ChangeLanguage((Services.SessionManager.GetInstance.User.LanguageId).ToString()); }
 else { if (!service.SelectedLanguageExists()) { service.ChangeLanguage("1"); } }
}
<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <title>@translator.GetTraduction(service, "RecoverPassword")</title>
 <link rel="stylesheet" href="~/Content/Site.css" />
 <link rel="preconnect" href="https://fonts.googleapis.com" />
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
 <link href="https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
 <style>
 body{ font-family:'Chivo', Arial, sans-serif; background:#f5faf5; }
 .layout{ display:flex; min-height:calc(100vh -60px); }
 .content{ flex:1; padding:32px 48px 40px; }
 .wrapper{ max-width:720px; margin:30px auto; }
 .card{ background:#fff; border:1px solid #d8e2d8; border-radius:20px; padding:24px 28px; box-shadow:0 2px 10px rgba(46,125,50,.12); }
 h1{ color:#2E7D32; margin:0; }
 h2{ color:#2E7D32; margin:0 0 12px 0; }
 .fld{ display:flex; flex-direction:column; gap:8px; margin-top:8px; }
 .fld label{ font-size:13px; font-weight:700; color:#1b5e20; }
 .fld input{ border:1px solid #cfe0cf; border-radius:8px; padding:10px 12px; font-size:14px; }
 .actions{ margin-top:14px; display:flex; gap:10px; }
 .btn{ border:none; cursor:pointer; padding:10px 16px; font-size:13px; font-weight:700; border-radius:12px; background:#2E7D32; color:#fff; }
 .btn:hover{ background:#1b5e20; }
 .btn-secondary{ background:#eceff1; color:#2b2b2b; }
 .btn-secondary:hover{ background:#dfe3e6; }
 nav.barra{ display:flex; align-items:center; justify-content:space-between; background:#2E7D32; padding:10px 16px; }
 nav.barra a{ color:#fff; text-decoration:none; font-weight:700; }
 .footer-fixed{ position:fixed; bottom:0; left:0; width:100%; background-color:#2E7D32; color:#fff; padding:10px; text-align:center; }
 </style>
</head>
<body>
 <nav class="barra">
 <a href="@Url.Action("Index","Home")">AgroMinds</a>
 <a href="@Url.Action("Login","Login")">@translator.GetTraduction(service, "Login")</a>
 </nav>
 <div class="layout">
 <main class="content">
 <div class="wrapper">
 <div class="card">
 <h2>Recover Password</h2>
 <p>Email</p>
 <p><strong>@(ViewBag.Email ?? "")</strong></p>
 <form id="resetForm" method="post" action="@Url.Action("CompleteReset","Login")" style="margin-top:10px;display:flex;flex-direction:column;gap:10px;">
 <input type="hidden" name="t" value="@ViewBag.Token" />
 <div class="fld">
 <label for="np">@translator.GetTraduction(service, "NewPassword")</label>
 <input id="np" type="password" name="newPassword" required />
 </div>
 <div class="actions">
 <button type="button" class="btn btn-secondary" onclick="window.location='@Url.Action("Login","Login")'">@translator.GetTraduction(service, "Cancel")</button>
 <button type="submit" class="btn">@translator.GetTraduction(service, "Save")</button>
 </div>
 </form>
 </div>
 </div>
 </main>
 </div>
 <footer class="footer-fixed">©2026 AgroMinds — @translator.GetTraduction(service, "AllRightsReserved")</footer>
 <script>
 (function(){
 var f=document.getElementById('resetForm');
 if(!f) return;
 f.addEventListener('submit', function(e){
 e.preventDefault();
 var fd=new FormData(f);
 fetch(f.action, { method:'POST', body: fd })
 .then(r=>r.json())
 .then(x=>{ if(x && x.success){ alert('Password updated'); window.location='@Url.Action("Login","Login")'; } else { alert((x&&x.error)||'Error'); } })
 .catch(()=>alert('Error'));
 });
 })();
 </script>
</body>
</html>